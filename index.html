<!DOCTYPE html><head><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="/index.6d96d981.css"><script src="/index.43072832.js"></script></head><body> <div id="main"></div> <script>const app=Elm.Main.init({node:document.getElementById("main"),flags:{isDarkMode:userPrefersDarkMode()}});function userPrefersDarkMode(){!!window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;return!0}function scrollLogToBottom(){requestAnimationFrame((()=>{const e=document.querySelector(".mid");e.scrollTop=e.scrollHeight}))}let connectionState="disconnected",socket=null;function handleConnectionState(e){["disconnected","connecting","connected"].includes(e)||console.error(`invalid connection state: "${e}"`),connectionState=e,app.ports.websocketStateReceiver.send(e)}function onerror(e){console.error("error connecting to telnet proxy:",e)}function onopen(){console.log("websocket connected")}function onmessage(e){console.log("recv:",e.data),"connecting"===connectionState&&handleConnectionState("connected"),app.ports.messageReceiver.send(e.data),scrollLogToBottom()}function onclose(){console.log("websocket closed"),handleConnectionState("disconnected"),socket.removeEventListener("error",onerror),socket.removeEventListener("open",onopen),socket.removeEventListener("close",onclose),socket.removeEventListener("message",onmessage),socket=null}function connect(e,o){socket&&(socket.close(),socket=null),console.log(`connecting to "telnet://${e.host}:${e.port_}" through telnet proxy "${o}"`),handleConnectionState("connecting");const n=`${o}?host=${encodeURIComponent(e.host)}&port=${e.port_||23}`,t=new WebSocket(n);return t.addEventListener("error",onerror),t.addEventListener("open",onopen),t.addEventListener("message",onmessage),t.addEventListener("close",onclose),t}app.ports.connect.subscribe((([e,o])=>{console.log("elm requesting connection"),socket=connect(e,o)})),app.ports.disconnect.subscribe((()=>{console.log("client request websocket disconnect"),onclose(),scrollLogToBottom()})),app.ports.sendMessage.subscribe((e=>{socket.send(e),document.querySelector("input").select()})),app.ports.downloadMessages.subscribe((([e,o])=>{if(!confirm("Do you want to download the history log?\n\n(Your browser may freeze while the log is prepared for download)"))return;const n=`${e}-${(new Date).toISOString().slice(0,10)}.log`,t=new Blob([o],{type:"text/plain"}),c=document.createElement("a");document.body.appendChild(c),c.download=n,c.href=URL.createObjectURL(t),c.click(),document.body.removeChild(c)}));</script> </body>